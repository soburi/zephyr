# Xen hypervisor configuration options

# Copyright (c) 2023 EPAM Systems
# SPDX-License-Identifier: Apache-2.0

config XEN
	bool
	default y
	depends on ARMV8_A
	depends on DT_HAS_XEN_XEN_ENABLED
	help
	  Enables support of Xen hypervisor on arm64 platform. Get enabled
	  when board device tree contains "hypervisor" node with "xen,xen"
	  compatible enabled.

config XEN_DOM0
	bool "Zephyr as Xen Domain 0"
	depends on XEN
	help
	  Built binary will be used as Xen privileged domain (Domain 0).

config XEN_DOM0LESS
	bool "Zephyr for Xen Dom0less setup"
	depends on XEN && !XEN_DOM0
	help
	  Configures Zephyr as DomU, that can be started on Dom0less
	  setup.

config XEN_INTERFACE_VERSION
	hex "Xen interface version"
	default 0x00040e00
	depends on XEN
	help
	  Xen interface version to use. This is the version of the
	  interface that Zephyr will use to communicate with the hypervisor.

config XEN_DOMCTL_INTERFACE_VERSION
	hex "Xen Domctl interface version"
	default 0x17
	range 0x15 0x17
	depends on XEN
	help
	  Xen Domctl interface version to use. This is the version of the
	  domctl interface that Zephyr will use to communicate with
	  the hypervisor. The default value is the latest version supported
	  by the kernel.

config XEN_SYSCTL_INTERFACE_VERSION
	hex "Xen Sysctl interface version"
	default 0x15
	range 0x15 0x15
	depends on XEN
	help
	  Xen Sysctl interface version to use. This is the version of the
	  domctl interface that Zephyr will use to communicate with
	  the hypervisor. The default value is the latest version supported
	  by the kernel.

config XEN_DOMCTL_XENTROOPS_ARCH_VGSX_OSID
	bool "OSID used by virtual GSX device"
	default n
	depends on XEN
	help
	  Pass vGSX OSID when creating domain in struct xen_arch_domainconfig.
	  Having matching OSID <-> DomID in place, Xen can properly recognize
	  to what domain to inject GSX irq.
	  Note. It is custom Xen property which is not maintained by Xen community.

config XEN_DOMCTL_XENTROOPS_ARCH_SCI_TYPE
	bool "SCI mediator framework type"
	default n
	depends on XEN
	help
	  SCI mediator framework type for creating domain in struct
	  xen_arch_domainconfig.
	  Note. It is custom Xen property which is not maintained by Xen community.
